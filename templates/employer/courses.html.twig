{% extends 'admin_base2.html.twig' %}

{% block title %}Courses
{% endblock %}

{% block body %}
	<div class="container-fluid">


		<div class="card bg-info-subtle shadow-none position-relative overflow-hidden mb-4">
			<div class="card-body px-4 py-3">
				<div class="row align-items-center">
					<div class="col-9">
						<h4 class="fw-semibold mb-8">
							<i class="ti ti-contract fs-8 "></i>
							Courses</h4>
						<nav aria-label="breadcrumb">
							<ol class="breadcrumb">
								<li class="breadcrumb-item">
									<a class="text-muted text-decoration-none" href="#">Courses</a>
								</li>
								<li class="breadcrumb-item" aria-current="page">Courses List</li>
							</ol>
						</nav>
					</div>
					<div class="col-3">
						<div class="text-center">
							<img src="{{ asset('assets/images/course.png') }}" alt="modernize-img" class="iconn img-fluid mb-n4">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">

			<div class="row">
				<div class="col-12"></div>
				<div class="col-md-6"></div>
				<div class="col-md-6">
					<div class="form-group"></div>
				</div>
			</div>


		</div>
		<div
			class="datatables">
			{% set type = "expression" %}
			<!-- start File export -->
			<div class="card" data-controller="employer">
				<div class="card-body">
					<div class="action-btn layout-top-spacing mb-7 d-flex align-items-center justify-content-between flex-wrap gap-6">
						<ul class="nav nav-pills user-profile-tab" id="pills-tab" role="tablist">
							<li class="nav-item" role="presentation">
								<a href="{{ path("app_employer_courses") }}" class="nav-link position-relative rounded-0 {{type ? " " : " active" }} d-flex align-items-center justify-content-center bg-transparent fs-3 py-3" aria-selected="true">
									<i class="ti ti-user-circle me-2 fs-6"></i>
									<span class="d-none d-md-block">All Courses</span>
								</a>
							</li>
							<li class="nav-item" role="presentation">
								<a href="{{ path("app_employer_courses",{'type': 'posted'}) }}" class="nav-link position-relative rounded-0 {{type == "posted" ? " active " : " " }} d-flex align-items-center justify-content-center bg-transparent fs-3 py-3" aria-selected="false">
									<i class="ti ti-bell me-2 fs-6"></i>
									<span class="d-none d-md-block">Open Courses</span>
								</a>
							</li>
							<li class="nav-item" role="presentation">
								<a href="{{ path("app_employer_courses",{'type': 'closed'}) }}" class="nav-link position-relative rounded-0 {{type == "closed" ? " active " : " " }} d-flex align-items-center justify-content-center bg-transparent fs-3 py-3" aria-selected="false">
									<i class="ti ti-article me-2 fs-6"></i>
									<span class="d-none d-md-block">Discontinued Courses</span>
								</a>
							</li>
						</ul>
						<a href="#" data-type="post course" data-status="shortlisted" data-can="" data-course="" data-action="click->employer#scheduleInterview" class="btn rounded-pill waves-effect waves-light btn-primary">
							Post a course
						</a>
					</div>
					<div class="table-responsive">
						<table id="file_export" class="table w-100 table-striped table-bordered display text-nowrap" width="100%">
							<thead>
								<!-- start row -->
								<tr>
									<th>Course ID</th>
									<th>Course Title</th>
									<th>Category</th>
									<th>Level</th>
									<th>No. Applicants</th>
									<th>Duration</th>
									<th>Start Date</th>
									<th>Closing Date</th>
									<th>Status</th>
									<th>Actions</th>
								</tr>
								<!-- end row -->
							</thead>
							<tbody>
								<!-- start row -->
								{% for course in courses %}

									<tr>
										<td>Course
											{{course.id}}</td>
										<td>{{course.title}}</td>
										<td>{{course.category}}</td>
										<td>{{course.qualification}}</td>
										<td>
											{% if course.courseApplications|length > 0 %}
												<a href="{{path('app_employer_course_applications', {'course': course.id})}}">Applications:
													{{ course.courseApplications|length }}</a>
											{% else %}
												{{ course.courseApplications|length }}
											{% endif %}
										</td>
										<td>{{course.courseduration}}</td>
										<td>{{course.startdate|date("d-m-Y")}}</td>
										<td>{{course.closedate|date("d-m-Y")}}</td>
										<td>
											{% if course.status == "posted" %}
												<button type="button" class="btn rounded-pill btn-block waves-effect waves-light btn-success">
													Active
												</button>

											{% else %}
												<button type="button" class="btn rounded-pill btn-block waves-effect waves-light btn-danger">
													Discontinued
												</button>
											{% endif %}


										</td>
										<td>
											<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
												<div class="btn-group me-2 mb-2" role="group" aria-label="First group">
													<a href="{{ path("app_employer_course_change_status",{'course': course.id, 'status': 'closed'}) }}" class="btn primary_one">
														<i class="ti ti-x fs-4"></i>
														Discontinue
													</a>
													<a href="#" data-type="post course" data-status="shortlisted" data-can="{{course.id}}" data-course="{{course.id}}" data-action="click->employer#scheduleInterview" class="btn primary_two">
														<i class="ti ti-edit fs-4"></i>
														Edit
													</a>
													<a href="{{ path("app_employer_course_change_status",{'course': course.id, 'status': 'deleted'}) }}" class="btn primary_three">
														<i class="ti ti-trash fs-4"></i>
														Delete
													</a>
												</div>

											</div>
										</td>
									</tr>
								{% endfor %}

								<!-- end row -->
							<!-- start row -->
								<!-- end row -->
							</tbody>
						</tfoot>
					</table>
				</div>
			</div>
		</div>
		<!-- end File export -->
	</div>
</div>{% endblock %}
