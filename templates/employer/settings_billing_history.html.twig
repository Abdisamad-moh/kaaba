{% extends 'admin_base2.html.twig' %}
{% block title %}Billing history
{% endblock %}
{% block body %}
	<style>
		th,
		td {
			font-family: inherit;
			font-size: 0.875em;
			line-height: 1.45;
			color: #444;
			vertical-align: middle;
			padding: 1em;
		}
		th {
			font-weight: 600;
		}
		colgroup:nth-child(1) {
			width: 31%;
			border: 0 none;
		}
		colgroup:nth-child(2) {
			width: 22%;
			border: 1px solid #ccc;
		}
		colgroup:nth-child(3) {
			width: 25%;
			border: 10px solid #59c7fb;
		}
		colgroup:nth-child(4) {
			width: 22%;
			border: 1px solid #ccc;
		}
		/* Tablehead */
		.packages thead th {
			background: #def4fe;
			background: -moz-linear-gradient(top, #ffffff 0%, #f5f5f5 100%);
			background: -webkit-linear-gradient(top, #ffffff 0%, #f5f5f5 100%);
			background: -o-linear-gradient(top, #ffffff 0%, #f5f5f5 100%);
			background: -ms-linear-gradient(top, #ffffff 0%, #f5f5f5 100%);
			background: linear-gradient(to bottom, #ffffff 0%, #f5f5f5 100%);
			text-align: center;
			position: relative;
			border-bottom: 1px solid #ccc;
			padding: 3em 0 2em;
			font-weight: 400;
			color: #999;
		}
		.packages thead th:nth-child(1) {
			background: transparent;
		}
		.packages thead th:nth-child(3) {
			padding: 2em 0 5em;
		}
		.packages thead th h2 {
			font-weight: 300;
			font-size: 2.4em;
			line-height: 1.2;
			color: #59c7fb;
		}
		.packages thead th h2 + p {
			font-size: 1.25em;
			line-height: 1.4;
		}
		.packages thead th:nth-child(3) h2 {
			font-size: 3.6em;
		}
		.packages thead th:nth-child(3) h2 + p {
			font-size: 1.5em;
		}
		.packages thead th p.promo {
			font-size: 1em;
			color: #fff;
			position: absolute;
			top: 9em;
			left: -17px;
			z-index: 1000;
			width: 100%;
			margin: 0;
			padding: 0.625em 17px 0.75em;
			background: #c00;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25);
			border-bottom: 1px solid #900;
		}
		.packages thead th p.promo:before {
			content: "";
			position: absolute;
			display: block;
			width: 0;
			height: 0;
			border-style: solid;
			border-width: 0 7px 7px 0;
			border-color: transparent #900 transparent transparent;
			bottom: -7px;
			left: 0;
		}
		.packages thead th p.promo:after {
			content: "";
			position: absolute;
			display: block;
			width: 0;
			height: 0;
			border-style: solid;
			border-width: 7px 7px 0 0;
			border-color: #900 transparent transparent transparent;
			bottom: -7px;
			right: 0;
		}
		/* Tablebody */
		.packages tbody th {
			background: #fff;
			border-left: 1px solid #ccc;
		}
		.packages tbody th span {
			font-weight: normal;
			font-size: 87.5%;
			color: #999;
			display: block;
		}
		.packages tbody td {
			background: #fff;
			text-align: center;
		}
		.packages tbody tr:nth-child(even) th,
		.packages tbody tr:nth-child(even) td {
			background: #f5f5f5;
			border: 1px solid #ccc;
			border-width: 1px 0 1px 1px;
		}
		.packages tbody tr:last-child td {
			border-bottom: 0 none;
		}
		/* Tablefooter */
		.packages tfoot th {
			padding: 2em 1em;
			border-top: 1px solid #ccc;
		}
		.packages tfoot td {
			text-align: center;
			padding: 2em 1em;
			border-top: 1px solid #ccc;
		}
		.packages tfoot a {
			font-weight: bold;
			color: #fff;
			text-decoration: none;
			text-transform: uppercase;
			display: block;
			padding: 1.125em 2em;
			background: #59c7fb;
			border-radius: 0.5em;
		}
	</style>
	<div class="container-fluid">
		<div class="card bg-info-subtle shadow-none position-relative overflow-hidden mb-4">
			<div class="card-body px-4 py-3">
				<div class="row align-items-center">
					<div class="col-9">
						<h4 class="fw-semibold mb-8">
							<i class="ti ti-file-dollar fs-8 "></i>
							Billing
						</h4>
						<nav aria-label="breadcrumb">
							<ol class="breadcrumb">
								<li class="breadcrumb-item">
									<a class="text-muted text-decoration-none" href="#">Billing History</a>
								</li>
							</ol>
						</nav>
					</div>
					<div class="col-3">
						<div class="text-center">
							<img src="{{ asset('assets/images/settings.png') }}" alt="modernize-img" class="iconn img-fluid mb-n4">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<div class="col-12"></div>
				<div class="col-md-6"></div>
				<div class="col-md-6">
					<div class="form-group"></div>
				</div>
			</div>
		</div>
		<div class="card">
			<ul class="nav nav-pills user-profile-tab" id="pills-tab" role="tablist">
				{# <li class="nav-item" role="presentation">
					<button class="nav-link position-relative rounded-0 active d-flex align-items-center justify-content-center bg-transparent fs-3 py-3" id="pills-bills-tab" data-bs-toggle="pill" data-bs-target="#pills-bills" type="button" role="tab" aria-controls="pills-bills" aria-selected="false">
						<i class="ti ti-file-invoice me-2 fs-6"></i>
						<span class="d-none d-md-block">Billing History</span>
					</button>
				</li> #}
			</ul>
			<div class="tab-pane fade  show active" id="pills-bills" role="tabpanel" aria-labelledby="pills-bills-tab" tabindex="0">
				<div class="row justify-content-center">
					<div class="col-lg-9">
						<div class="card border shadow-none">
							<div class="card-body p-4">
								{% if activeplan  %}
									<h4 class="card-title">Current Plan :
										<span class="text-success">{{activeplan.plan.name}}</span>
									</h4>
									<p class="card-subtitle">Thanks for being a subcriber and using our platform.</p>
									<div class="d-flex align-items-center justify-content-between mt-7 mb-3">
										<div class="d-flex align-items-center gap-3">
											<div class="text-bg-light rounded-1 p-6 d-flex align-items-center justify-content-center">
												<i class="ti ti-package text-dark d-block fs-7" width="22" height="22"></i>
											</div>
											<div>
												<p class="mb-0">Current Plan</p>
												<h5 class="fs-4 fw-semibold">{{activeplan.plan.name}}
													{{activeplan.plan.cost}}{{activeplan.plan.duration|packageType}}</h5>
											</div>
										</div>
									</div>
									<div class="d-flex align-items-center gap-3">
										<button class="btn btn-primary">Change Plan</button>
										<button class="btn bg-danger-subtle text-danger">Reset Plan</button>
									</div>
									{% else %}
								{% endif %}
							</div>
						</div>
					</div>
					<div class="col-12"></div>
					<div class="col-lg-9">
						<div class="product-list">
							<div class="card">
								{# <h4 class="card-title mb-3">Billing/Orders History</h4> #}
								<div class="card-body p-3">
									<div class="d-flex justify-content-between align-items-center gap-6 mb-9">
										<form class="position-relative">
											
										</form>
										
									</div>
									<div class="table-responsive border rounded  mb-8">
										<table class="table align-middle text-nowrap mb-0">
											<thead>
												<tr>
													<th scope="col">Order ID</th>
													<th scope="col">Date</th>
													<th scope="col">Plan</th>
													<th scope="col">Tax</th>
													<th scope="col">Total Amount</th>
													<th scope="col">Status</th>
													<th scope="col">Action</th>
												</tr>
											</thead>
											<tbody>
												{% if employer.orders is empty %}
													<tr>
														<td colspan="5" class="text-center">No data available</td>
													</tr>
												{% else %}
													{% for item in employer.orders %}
														{% set tax = ((item.plan.cost * 5) / 100) | round(2) %}
														{% set final = (item.plan.cost + tax) | round(2) %}
														<tr>
															<td>#{{item.id}}</td>
															<td>
																<p class="mb-0">{{item.validfrom|date("F j, Y")}}</p>
															</td>
															<td>
																<div class="d-flex align-items-center">
																	<span class="text-bg-success p-1 rounded-circle"></span>
																	<p class="mb-0 ms-2">{{item.plan.name}}</p>
																</div>
															</td>
															<td>
																<h6 class="mb-0 fs-4">${{tax}}</h6>
															</td>
															<td>
																<h6 class="mb-0 fs-4">${{final}}</h6>
															</td>
															<td>
																{% if  item.category == "subscription" %}
																	<span class="mb-1 badge rounded-pill text-bg-success">Active</span>
																{% elseif item.category != "subscription" %}
																	<span class="mb-1 badge rounded-pill text-bg-danger"></span>
																	{% else %}
																{% endif %}
															</td>
															<td>
																<a target="__blank" href="{{ path('app_employer_request_ad_temp', {'order': item.orderuid}) }}" class="btn btn-primary d-block">
																	<i class="fa fa-file"></i>
																	Download Receipt</a>
															</td>
														</tr>
													{% endfor %}
												{% endif %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- end File export -->
{% endblock %}
