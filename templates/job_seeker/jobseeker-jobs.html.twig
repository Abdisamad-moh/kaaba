{% extends 'base.html.twig' %}

{% block title %}Home!
{% endblock %}

{% block body %}
	<style>
		.logo-size {
			width: 58px;
			height: 58px;
		}

        [data-jobseeker-jobs="header"] {
            cursor: pointer;
        }
	</style>
	    <section class="bg-homelogin" id="home">
				<div class="container">
					<div class="row align-items-center">
						<div class="col-lg-12">
							<div class="mb-2 me-lg-6 text-center">
								{# <h1 class="display-5 fw-semibold mb-3 mt-3 fs-22">My
									<span class="text-primary fw-bold">Profile</span>
								</h1>
								<p class="lead text-muted mb-0 pc-da">This is your profile page. Here you can tell us about your education, work experience, skills and interests. This is where you can showcase your skills, qualifications and interests to potential employers. All entries are mandatory</p>
							 #}
                             <h5>User {{ type|capitalize }} Jobs</h5>
                            </div>
						</div>
					</div>
				</div>
			</section>

			<section class="section" data-controller="jobseeker-jobs">
				<div class="container-fluid">
					<div class="row justify-content-center">
						<div class="col-lg-2" onclick="window.location.replace='{{ path('jobseeker_jobs', {type: ""}) }}'" data-jobseeker-jobs="header" data-action="click->jobseeker-jobs#goToList" data-jobseeker-jobs-url-param="{{ path('jobseeker_jobs', {type: 'applied'})}}">
							<div class="alert  bg-info-subtle p-4 pb-2" role="alert">
								<div class="d-flex justify-content-between">
									<div>
										<img class="img-fluid rounded-3" src="{{asset('assets/images/p1.png')}}" alt="">
									</div>
									<span class="fs-22">{{ app.user.jobApplications|length}}</span>
								</div>
								<h6 class="">
									APPLIED
								</h6>
							</div>
						</div>
						<div class="col-lg-2" onclick="window.location.replace='{{ path('jobseeker_jobs', {type: ""}) }}'" data-jobseeker-jobs="header" data-action="click->jobseeker-jobs#goToList" data-jobseeker-jobs-url-param="{{ path('jobseeker_jobs', {type: 'shortlisted'})}}">
							<div class="alert  bg-success-subtle p-4 pb-2" role="alert">
								<div class="d-flex justify-content-between">
									<div>
										<img class="img-fluid rounded-3" src="{{asset('assets/images/p2.png')}}" alt="">
									</div>
									<span class="fs-22">{{ app.user.jobApplications|filter(application => application.status == 'shortlisted')|length }}</span>
								</div>
								<h6 class="">
									SHORTLISTED
								</h6>
							</div>
						</div>
						<div class="col-lg-2" onclick="window.location.replace='{{ path('jobseeker_jobs', {type: ""}) }}'" data-jobseeker-jobs="header" data-action="click->jobseeker-jobs#goToList" data-jobseeker-jobs-url-param="{{ path('jobseeker_jobs', {type: 'interview_scheduled'})}}">
							<div class="alert  bg-primary-subtle p-4 pb-2" role="alert">
								<div class="d-flex justify-content-between">
									<div>
										<img class="img-fluid rounded-3" src="{{asset('assets/images/p3.png')}}" alt="">
									</div>
									<span class="fs-22">{{ app.user.jobApplicationInterviews|length }}</span>
								</div>
								<h6 class="">
									INTERVIEW SCHEDULED
								</h6>
							</div>
						</div>
						<div class="col-lg-2" onclick="window.location.replace='{{ path('jobseeker_jobs', {type: "saved"}) }}'" data-jobseeker-jobs="header" data-action="click->jobseeker-profile#goToList" data-jobseeker-jobs-url-param="{{ path('jobseeker_jobs', {type: 'saved'})}}">
							<div class="alert  bg-secondary-subtle p-4 pb-2" role="alert">
								<div class="d-flex justify-content-between">
									<div>
										<img class="img-fluid rounded-3" src="{{asset('assets/images/p4.png')}}" alt="">
									</div>
									<span class="fs-22">{{ app.user.jobseekerSavedJobs|length }}</span>
								</div>
								<h6 class="">
									SAVED
								</h6>
							</div>
						</div>
						<div class="col-lg-2" onclick="window.location.replace='{{ path('jobseeker_jobs', {type: "rejected"}) }}'" data-jobseeker-jobs="header" data-action="click->jobseeker-profile#goToList" data-jobseeker-jobs-url-param="{{ path('jobseeker_jobs', {type: 'rejected'})}}">
							<div class="alert  bg-danger-subtle p-4 pb-2" role="alert">
								<div class="d-flex justify-content-between">
									<div>
										<img class="img-fluid rounded-3" src="{{asset('assets/images/p5.png')}}" alt="">
									</div>
									<span class="fs-22">{{ app.user.jobApplications|filter(application => application.status == 'rejected')|length }}</span>
								</div>
								<h6 class="">
									REJECTED
								</h6>
							</div>
						</div>

						<!-- -------------------------- -->
					</div>
				</div>
			</section>
			
			<section class="section-re-de-pa">
				<div class="container">
					
                    {% for job_application in applications %}
                        <div class="col-lg-4 col-md-6 mt-4">
                            <div class="card job-grid-box">
                                <div class="card-body p-4">
                                    <div>
                                        <div class="favorite-icon d-flex flex-column align-items-end">
                                            {# {% if app.user %}
                                                <a href="#" {% if app.user %} data-jobs-url-param="{{ path('job_seeker_save_job', {'job': job.id}) }}" data-action="click->jobs#saveJob" {% endif %} style="font-family: 'Inter', sans-serif;">
                                                    <i id="save{{job.id}}" class="fa  {{ job.id in saved_jobs ? 'fa-bookmark text-success' : 'fa-bookmark-o' }}" aria-hidden="true"></i>
                                                    <span class="job-cont">
                                                        Save</span>
                                                </a>
                                            {% endif %} #}

                                            {% if job_application.job.isImmediateHiring %}
                                                <span class="badge rounded-pill bg-warning text-dark">Immediate Hiring</span>
                                            {% endif %}
                                        </div>
                                        <div class="boxlogoicon">
                                            <a href="#"><img class="logo-size" src="{{ asset('uploads/profile/no-image.jpg') }}" alt="" class="img-fluid rounded-3"></a>
                                        </div>
                                    </div>
                                    <div class="mt-4">
                                        <a href="{{ path('job_seeker_job_details', {'slug': job_application.job.title|slugify, 'uuid': job_application.job.uuid }) }}" class="primary-link">
                                            <h5>{{ job_application.job.employer.name}}</h5>
                                            <h5 class="fs-16 mb-3">{{ job_application.job.title ?? ''}}</h5>
                                        </a>
                                        <p class="text-muted">
                                            <span style="padding-right:10px;">
                                                <i class="fa fa-map-marker" aria-hidden="true"></i>
                                                &nbsp;{{ (job_application.job.country.name ?? '') ~ ', ' ~ (job_application.job.city.name ?? '') ~ ', ' ~ job_application.job.location ?? '' }}
                                            </span>
                                            <i class="fa fa-briefcase" aria-hidden="true"></i>
                                            &nbsp;{{ job_application.job.numberPosition}}
                                            {% if job_application.job.numberPosition == 0 %}
									
									{% elseif job_application.job.numberPosition  == 1 %}
									Role Available
									{% elseif job_application.job.numberPosition > 1 %}
									Roles Available
								{% endif %}
                                        </p>
                                    </div>
                                    <div class="job-grid-content mt-2">
                                        <p class="text-muted">{{ (job_application.job.jobDescription)|shorten(220) }}</p>
                                        <ul class="list-inline">
                                            {% for type in job_application.job.jobTypes %}
                                                <li class="list-inline-item">
                                                    <span class="badge rounded-pill bg-secondary">{{ type.name }}</span>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                        <div class="d-flex align-items-center justify-content-between border-top mt-2 pt-1">
                                            <p class="text-mutedse float-start mb-0">Expires in
                                                <span style="font-weight:500;color:#666;">{{ job_application.job.expiresAt }}</span>
                                            </p>
                                            <div class="text-end">
                                                <i>
                                                    Posted
                                                    {{ job_application.job.postedAt }}</i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end card-body-->
                            </div>
                            <!--end job-grid-box-->
                        </div>
                    {% endfor %}

                    {% for saved_job in saved_jobs %}
                        <div class="col-lg-4 col-md-6 mt-4">
                            <div class="card job-grid-box">
                                <div class="card-body p-4">
                                    <div>
                                        <div class="favorite-icon d-flex flex-column align-items-end">
                                            {# {% if app.user %}
                                                <a href="#" {% if app.user %} data-jobs-url-param="{{ path('job_seeker_save_job', {'job': job.id}) }}" data-action="click->jobs#saveJob" {% endif %} style="font-family: 'Inter', sans-serif;">
                                                    <i id="save{{job.id}}" class="fa  {{ job.id in saved_jobs ? 'fa-bookmark text-success' : 'fa-bookmark-o' }}" aria-hidden="true"></i>
                                                    <span class="job-cont">
                                                        Save</span>
                                                </a>
                                            {% endif %} #}

                                            {% if saved_job.job.isImmediateHiring %}
                                                <span class="badge rounded-pill bg-warning text-dark">Immediate Hiring</span>
                                            {% endif %}
                                        </div>
                                        <div class="boxlogoicon">
                                            <a href="#"><img class="logo-size" src="{{ asset('uploads/profile/no-image.jpg') }}" alt="" class="img-fluid rounded-3"></a>
                                        </div>
                                    </div>
                                    <div class="mt-4">
                                        <a href="{{ path('job_seeker_job_details', {'slug': saved_job.job.title|slugify, 'uuid': saved_job.job.uuid }) }}" class="primary-link">
                                            <h5>{{ saved_job.job.employer.name}}</h5>
                                            <h5 class="fs-16 mb-3">{{ saved_job.job.title ?? ''}}</h5>
                                        </a>
                                        <p class="text-muted">
                                            <span style="padding-right:10px;">
                                                <i class="fa fa-map-marker" aria-hidden="true"></i>
                                                &nbsp;{{ (saved_job.job.country.name ?? '') ~ ', ' ~ (saved_job.job.city.name ?? '') ~ ', ' ~ saved_job.job.location ?? '' }}
                                            </span>
                                            <i class="fa fa-briefcase" aria-hidden="true"></i>
                                            &nbsp;{{ saved_job.job.numberPosition}}
                                            {% if saved_job.job.numberPosition == 0 %}
									
									{% elseif saved_job.job.numberPosition  == 1 %}
									Role Available
									{% elseif saved_job.job.numberPosition > 1 %}
									Roles Available
								{% endif %}
                                        </p>
                                    </div>
                                    <div class="job-grid-content mt-2">
                                        <p class="text-muted">{{ (saved_job.job.jobDescription)|shorten(220) }}</p>
                                        <ul class="list-inline">
                                            {% for type in saved_job.job.jobTypes %}
                                                <li class="list-inline-item">
                                                    <span class="badge rounded-pill bg-secondary">{{ type.name }}</span>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                        <div class="d-flex align-items-center justify-content-between border-top mt-2 pt-1">
                                            <p class="text-mutedse float-start mb-0">Expires in
                                                <span style="font-weight:500;color:#666;">{{ saved_job.job.expiresAt }}</span>
                                            </p>
                                            <div class="text-end">
                                                <i>
                                                    Posted
                                                    {{ saved_job.job.postedAt }}</i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--end card-body-->
                            </div>
                            <!--end job-grid-box-->
                        </div>
                    {% endfor %}
				</div>
			</section>
	 
	{% include 'home/_footer.html.twig' %}
</div></div></div>{% endblock %}
